# Supabase automation

Скрипт раз в N времени заходит на supabase.com, логинится, открывает пару страниц и выходит.

## Доступы

1. Открой **`credentials.json`** в папке проекта.
2. Заполни:
   - `email` — твой email от аккаунта Supabase
   - `password` — пароль

Файл `credentials.json` в `.gitignore`, в репозиторий не попадёт. Пример структуры — в `credentials.example.json`.

## Запуск

```bash
cd "c:\Users\user\Desktop\supabase script"
node run.js
```

Если браузер не запускается (нет Chrome), установи Chromium для Playwright (вне песочницы):

```bash
npx playwright install chromium
```

## Интервал

Скрипт по умолчанию запускает цикл **раз в 4 дня** (настраивается в `run.js`, константа `INTERVAL_MS`).

Все действия скрипт пишет в консоль с меткой времени.

## Капча

Если при входе появляется капча, запусти скрипт **с видимым окном** — откроется браузер, ты решаешь капчу вручную, через до 2 минут скрипт продолжит сам:

**PowerShell:** `$env:HEADLESS='false'; node run.js`  
**CMD:** `set HEADLESS=false && node run.js`

Первый раз реши капчу и войди. В папке `browser-profile` сохранится сессия; при следующих запусках (даже с `HEADLESS=true`) капча может не показываться.

## Автозапуск раз в 4 дня (Планировщик заданий)

1. Открой **Планировщик заданий**: `Win + R` → `taskschd.msc` → Enter.
2. Справа нажми **«Создать задачу…»** (не «Создать простую задачу»).
3. **Вкладка «Общие»**: имя `Supabase automation`, отметь «Выполнять вне зависимости от регистрации пользователя».
4. **Вкладка «Триггеры»** → Создать → **По расписанию** → **Ежедневно**, повторять каждые **4** дня, укажи время (например 10:00) → ОК.
5. **Вкладка «Действия»** → Создать → **Запуск программы**:
   - Программа: полный путь к `start-supabase-task.bat`, например  
     `C:\Users\user\Desktop\supabase script\start-supabase-task.bat`
   - Рабочая папка: `C:\Users\user\Desktop\supabase script`
6. ОК, при запросе введи пароль.

Проверка: в списке задач правый клик по задаче → **Выполнить**. Если Node не находится, в .bat укажи полный путь к `node.exe` (например `"C:\Program Files\nodejs\node.exe"` вместо `node`).
